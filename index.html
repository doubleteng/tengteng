<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Teng Teng | Portfolio</title>
  <meta name="description" content="Minimal academic & design portfolio with category filters." />
  <style>
    :root{--bg:#ffffff;--text:#111827;--sub:#6b7280;--border:#e5e7eb;--shadow:0 8px 24px rgba(0,0,0,.06);--radius:18px}
    *{box-sizing:border-box} html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Noto Sans,sans-serif;background:var(--bg);color:var(--text);line-height:1.6}
    a{color:var(--text);text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:1080px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:12px 0 8px;position:sticky;top:0;background:rgba(255,255,255,.88);backdrop-filter:blur(8px);z-index:10;border-bottom:1px solid var(--border)}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800}
    .brand .logo{width:36px;height:36px;border-radius:12px;background:#111827;color:#fff;display:grid;place-items:center;box-shadow:0 6px 18px rgba(0,0,0,.08)}
    nav.menu > ul{list-style:none;margin:0;padding:0;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    nav.menu > ul > li{position:relative}
    nav.menu > ul > li > a{color:var(--sub);font-weight:600;display:inline-block;padding:6px 10px;border-radius:8px}
    nav.menu > ul > li > a:hover{color:var(--text);background:#f3f4f6}
    nav.menu .submenu{display:none;position:absolute;top:36px;left:0;background:#fff;border:1px solid var(--border);border-radius:12px;padding:8px;box-shadow:var(--shadow);min-width:220px}
    nav.menu .submenu li{list-style:none}
    nav.menu .submenu li a{display:block;padding:8px 10px;color:var(--text)}
    nav.menu .submenu li a:hover{background:#f9fafb}
    nav.menu > ul > li:hover > .submenu{display:block}

    .hero{margin-top:18px;display:grid;grid-template-columns:1.2fr .8fr;gap:28px;align-items:center}
    @media(max-width:900px){.hero{grid-template-columns:1fr}}
    .card{background:#fff;border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);padding:24px}
    .hero h1{font-size:clamp(28px,4vw,46px);margin:0 0 10px}
    .hero p{color:var(--sub);margin:0}
    .avatar{aspect-ratio:1/1;border-radius:var(--radius);background:#eee url('https://images.unsplash.com/photo-1544006659-f0b21884ce1d?q=80&w=800&auto=format&fit=crop') center/cover;border:1px solid var(--border)}

    h2{font-size:clamp(22px,3vw,28px);margin:18px 0 10px}
    .filters{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
    .btn{display:inline-block;padding:10px 14px;border-radius:12px;border:1px solid var(--border);background:#fff;color:var(--text);font-weight:700}
    .btn[aria-pressed="true"]{background:#f3f4f6}
    .grid{display:grid;gap:16px}
    .grid.projects{grid-template-columns:repeat(3,1fr)}
    @media(max-width:900px){.grid.projects{grid-template-columns:repeat(2,1fr)}}
    @media(max-width:600px){.grid.projects{grid-template-columns:1fr}}
    .project{display:grid;grid-template-rows:160px auto;overflow:hidden}
    .thumb{border-radius:14px;border:1px solid var(--border);background:#f3f4f6 center/cover}
    .project .meta{padding:10px 4px 0}
    .meta h3{margin:0 0 4px;font-size:16px}
    .meta p{margin:0;color:var(--sub);font-size:14px}
    .more{margin-top:12px;text-align:center}
    footer{color:var(--sub);font-size:13px;text-align:center;padding:28px 0 12px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand"><div class="logo" aria-hidden="true">TT</div><span>Teng Teng</span></div>
      <nav aria-label="Primary" class="menu">
        <ul>
          <li><a href="./">Home</a></li>
          <li><a href="research/">Research</a></li>
          <li><a href="teaching/">Teaching</a></li>
          <li><a href="design/">Design</a></li>
          <li><a href="design/">Publications</a></li>
          <li><a href="news/">News</a></li>
          <li><a href="about/">About</a></li>
          <li><a href="contact/">Contact</a></li>
        </ul>
      </nav>
    </header>

    <main>
      <section id="home" class="hero" aria-labelledby="intro-title">
        <div class="card">
          <h1 id="intro-title">Hi, I’m Teng Teng</h1>
          <p>Designer / Researcher / Educator. I work across <strong>computation</strong>, <strong>materials</strong>, <strong>fabrication</strong>, and <strong>robotics</strong>, translating research into design and teaching.</p>
        </div>
        <div class="avatar" role="img" aria-label="Profile image"></div>
      </section>

      <section id="projects" aria-labelledby="projects-title" style="margin-top:26px">
        <h2 id="projects-title">Projects</h2>
        <div class="filters" aria-label="Primary category filter">
          <button class="btn" data-filter="all" aria-pressed="true">All</button>
          <button class="btn" data-filter="research" aria-pressed="false">Research</button>
          <button class="btn" data-filter="teaching" aria-pressed="false">Teaching</button>
          <button class="btn" data-filter="design" aria-pressed="false">Design</button>
          <span style="font-size:12px;color:#6b7280;margin-left:8px;">(Show up to 9 items)</span>
        </div>

        <div class="grid projects" id="project-grid"></div>

        <div class="more">
          <a id="view-all" class="btn" href="gallery/?cat=all">View all →</a>
        </div>
      </section>
    </main>

    <footer>© <span id="year"></span> Teng Teng · Hosted on GitHub Pages</footer>
  </div>

  <script src="assets/js/projects.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function(){
      var yearEl = document.getElementById('year'); if(yearEl) yearEl.textContent = new Date().getFullYear();

      const projects = (window.PROJECTS||[]).slice();
      const grid = document.getElementById('project-grid');
      const buttons = Array.from(document.querySelectorAll('.filters [data-filter]'));
      const viewAll = document.getElementById('view-all');
      const MAX = 9;

      function byYearDesc(a,b){ return (b.year||0) - (a.year||0); }
      function shuffle(arr){ for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; } return arr; }
      function setPressed(target){ buttons.forEach(b=>b.setAttribute('aria-pressed', String(b===target))); }
      function cap(s){ return s.charAt(0).toUpperCase()+s.slice(1); }

      function renderCards(list){
        const omit = new Set(['research','design','teaching']);
        grid.innerHTML = list.slice(0,MAX).map(p => {
          const tags = (p.tags||[]).filter(t => !omit.has(t.toLowerCase())).map(cap).join(' · ');
          return `
            <a class="project card" href="${p.url}">
              <div class="thumb" style="background-image:url('${p.img}')"></div>
              <div class="meta"><h3>${p.title}</h3><p class="tag">${tags}</p></div>
            </a>
          `;
        }).join('');
      }

      function updateViewAll(cat){
        var c = cat || 'all';
        if(viewAll) viewAll.href = 'gallery/?cat=' + encodeURIComponent(c);
      }

      function applyFilter(type){
        let list;
        if(type==='all'){ list = shuffle(projects.slice()); }
        else{ list = projects.filter(p => p.cats.includes(type)).sort(byYearDesc); }
        renderCards(list);
        updateViewAll(type);
      }

      // 初始：All
      applyFilter('all');

      // 绑定按钮
      buttons.forEach(btn=>{
        btn.addEventListener('click', ()=>{ setPressed(btn); applyFilter(btn.dataset.filter); });
      });
    });
  </script>
</body>
</html>
